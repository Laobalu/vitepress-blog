<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端鉴权 | VitePress</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.1.3">
    <link rel="preload stylesheet" href="/assets/style.qmKfEc0P.css" as="style">
    
    <script type="module" src="/assets/app.jSEhu61U.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.DhS4kvOD.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BFOf9xC9.js">
    <link rel="modulepreload" href="/assets/前端鉴权.md.BAUGo2GP.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f65e98a0><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9461f000></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9461f000> Skip to content </a><!--]--><!----><header class="VPNav" data-v-f65e98a0 data-v-3233c66d><div class="VPNavBar has-sidebar top" data-v-3233c66d data-v-2bffc70e><div class="wrapper" data-v-2bffc70e><div class="container" data-v-2bffc70e><div class="title" data-v-2bffc70e><div class="VPNavBarTitle has-sidebar" data-v-2bffc70e data-v-0cfbeeb5><a class="title" href="/" data-v-0cfbeeb5><!--[--><!--]--><!----><span data-v-0cfbeeb5>VitePress</span><!--[--><!--]--></a></div></div><div class="content" data-v-2bffc70e><div class="content-body" data-v-2bffc70e><!--[--><!--]--><div class="VPNavBarSearch search" data-v-2bffc70e><!----></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-2bffc70e data-v-68f31912><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-68f31912 data-v-a31ca4d6 data-v-a60fc858><span class="check" data-v-a60fc858><span class="icon" data-v-a60fc858><!--[--><span class="vpi-sun sun" data-v-a31ca4d6></span><span class="vpi-moon moon" data-v-a31ca4d6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-2bffc70e data-v-3af54a07 data-v-83f4362b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-83f4362b data-v-3077b76d><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-2bffc70e data-v-f5d1a069 data-v-ad41615b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-ad41615b><span class="vpi-more-horizontal icon" data-v-ad41615b></span></button><div class="menu" data-v-ad41615b><div class="VPMenu" data-v-ad41615b data-v-26c50629><!----><!--[--><!--[--><!----><div class="group" data-v-f5d1a069><div class="item appearance" data-v-f5d1a069><p class="label" data-v-f5d1a069>Appearance</p><div class="appearance-action" data-v-f5d1a069><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f5d1a069 data-v-a31ca4d6 data-v-a60fc858><span class="check" data-v-a60fc858><span class="icon" data-v-a60fc858><!--[--><span class="vpi-sun sun" data-v-a31ca4d6></span><span class="vpi-moon moon" data-v-a31ca4d6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f5d1a069><div class="item social-links" data-v-f5d1a069><div class="VPSocialLinks social-links-list" data-v-f5d1a069 data-v-83f4362b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-83f4362b data-v-3077b76d><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-2bffc70e data-v-e6df2716><span class="container" data-v-e6df2716><span class="top" data-v-e6df2716></span><span class="middle" data-v-e6df2716></span><span class="bottom" data-v-e6df2716></span></span></button></div></div></div></div><div class="divider" data-v-2bffc70e><div class="divider-line" data-v-2bffc70e></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-f65e98a0 data-v-f8e8cafa><div class="container" data-v-f8e8cafa><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f8e8cafa><span class="vpi-align-left menu-icon" data-v-f8e8cafa></span><span class="menu-text" data-v-f8e8cafa>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f8e8cafa data-v-064dec13><button data-v-064dec13>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-f65e98a0 data-v-75904095><div class="curtain" data-v-75904095></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-75904095><span class="visually-hidden" id="sidebar-aria-label" data-v-75904095> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-75904095><section class="VPSidebarItem level-0 has-active" data-v-75904095 data-v-e3b1a847><div class="item" role="button" tabindex="0" data-v-e3b1a847><div class="indicator" data-v-e3b1a847></div><h2 class="text" data-v-e3b1a847>前端</h2><!----></div><div class="items" data-v-e3b1a847><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e3b1a847 data-v-e3b1a847><div class="item" data-v-e3b1a847><div class="indicator" data-v-e3b1a847></div><a class="VPLink link link" href="/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-v-e3b1a847><!--[--><p class="text" data-v-e3b1a847>性能优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e3b1a847 data-v-e3b1a847><div class="item" data-v-e3b1a847><div class="indicator" data-v-e3b1a847></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E9%89%B4%E6%9D%83.html" data-v-e3b1a847><!--[--><p class="text" data-v-e3b1a847>前端鉴权</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-75904095><section class="VPSidebarItem level-0" data-v-75904095 data-v-e3b1a847><div class="item" role="button" tabindex="0" data-v-e3b1a847><div class="indicator" data-v-e3b1a847></div><h2 class="text" data-v-e3b1a847>前端工程化</h2><!----></div><div class="items" data-v-e3b1a847><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e3b1a847 data-v-e3b1a847><div class="item" data-v-e3b1a847><div class="indicator" data-v-e3b1a847></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2.html" data-v-e3b1a847><!--[--><p class="text" data-v-e3b1a847>前端部署</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-f65e98a0 data-v-26742ef1><div class="VPDoc has-sidebar has-aside" data-v-26742ef1 data-v-f0a19733><!--[--><!--]--><div class="container" data-v-f0a19733><div class="aside" data-v-f0a19733><div class="aside-curtain" data-v-f0a19733></div><div class="aside-container" data-v-f0a19733><div class="aside-content" data-v-f0a19733><div class="VPDocAside" data-v-f0a19733 data-v-0fc2e3af><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-0fc2e3af data-v-b794c6d0><div class="content" data-v-b794c6d0><div class="outline-marker" data-v-b794c6d0></div><div class="outline-title" role="heading" aria-level="2" data-v-b794c6d0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-b794c6d0><span class="visually-hidden" id="doc-outline-aria-label" data-v-b794c6d0> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-b794c6d0 data-v-f217efe3><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-0fc2e3af></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f0a19733><div class="content-container" data-v-f0a19733><!--[--><!--]--><main class="main" data-v-f0a19733><div style="position:relative;" class="vp-doc _%E5%89%8D%E7%AB%AF%E9%89%B4%E6%9D%83" data-v-f0a19733><div><h1 id="前端鉴权" tabindex="-1">前端鉴权 <a class="header-anchor" href="#前端鉴权" aria-label="Permalink to &quot;前端鉴权&quot;">​</a></h1><h2 id="cookie和session" tabindex="-1">cookie和session <a class="header-anchor" href="#cookie和session" aria-label="Permalink to &quot;cookie和session&quot;">​</a></h2><h2 id="jwt" tabindex="-1">JWT <a class="header-anchor" href="#jwt" aria-label="Permalink to &quot;JWT&quot;">​</a></h2><h2 id="双token" tabindex="-1">双token <a class="header-anchor" href="#双token" aria-label="Permalink to &quot;双token&quot;">​</a></h2><p>一种常见的身份验证机制。结合了访问令牌（access token）和刷新令牌（refresh token）两种令牌来实现用户认证和访问控制。</p><h3 id="基本流程" tabindex="-1">基本流程 <a class="header-anchor" href="#基本流程" aria-label="Permalink to &quot;基本流程&quot;">​</a></h3><ol><li><p>用户登录： 用户在客户端提供用户名和密码进行登录，后台验证用户身份合法后，生成一对访问令牌（Access Token）和刷新令牌（Refresh Token），并将它们发送给客户端。</p></li><li><p>访问令牌验证： 客户端在每次向服务端发起请求时，都需要携带访问令牌作为身份验证凭证。服务端接收到请求后，验证访问令牌的合法性，如果令牌有效，则允许用户继续操作；如果令牌无效或过期，则拒绝用户的请求，并返回身份验证失败的错误信息。</p></li><li><p>访问令牌过期： 访问令牌具有一定的有效期，在有效期内可以使用，一旦过期则无法再被使用。如果客户端发现访问令牌即将过期，可以使用刷新令牌向服务端请求获取新的访问令牌。</p></li><li><p>刷新令牌使用： 刷新令牌用于获取新的访问令牌，以延长用户的登录状态。客户端在访问令牌即将过期时，使用刷新令牌向服务端请求新的访问令牌。服务端验证刷新令牌的合法性，如果令牌有效，则生成新的访问令牌并返回给客户端；如果令牌无效或已经过期，则拒绝客户端的请求，并要求用户重新登录。</p></li><li><p>访问令牌的刷新： 通过刷新令牌获取新的访问令牌后，客户端继续使用新的访问令牌进行后续的请求操作，直到新的访问令牌再次过期或用户主动退出登录为止。</p></li><li><p>重新发送原始请求： 一旦收到新的访问令牌并更新本地存储后，前端应该使用缓存的原始请求信息重新发送请求。根据缓存的请求信息，重新构建请求，并将新的访问令牌加入请求头中，然后发送该请求到后端。</p></li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// axios.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axios </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;axios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> instance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  baseURL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://example.com/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 其他 axios 配置项</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加请求拦截器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance.interceptors.request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 在发送请求之前检查是否有新的访问令牌，如果没有则跳转到登录页</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      redirectToLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;No access token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 构建请求头，包含新的访问令牌</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Authorization: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Bearer ${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAccessToken</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 将新的请求头合并到配置中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config.headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.headers,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加响应拦截器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance.interceptors.response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 如果接收到 401 错误，表示访问令牌过期，尝试刷新令牌并重新发送原始请求</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.response.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 401</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refreshAccessTokenAndRetry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error.config);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 封装刷新访问令牌并重试的逻辑</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refreshAccessTokenAndRetry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 发起刷新访问令牌的请求</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    refreshAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 刷新成功后重新发送原始请求</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resolve)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reject);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance;</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-f0a19733 data-v-82af6d1b><!--[--><!--]--><!----><nav class="prev-next" data-v-82af6d1b><div class="pager" data-v-82af6d1b><a class="VPLink link pager-link prev" href="/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-v-82af6d1b><!--[--><span class="desc" data-v-82af6d1b>Previous page</span><span class="title" data-v-82af6d1b>性能优化</span><!--]--></a></div><div class="pager" data-v-82af6d1b><a class="VPLink link pager-link next" href="/%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2.html" data-v-82af6d1b><!--[--><span class="desc" data-v-82af6d1b>Next page</span><span class="title" data-v-82af6d1b>前端部署</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"前端鉴权.md\":\"BAUGo2GP\",\"性能优化.md\":\"Fbq8pL4y\",\"index.md\":\"D33vMci8\",\"前端部署.md\":\"i61MrJgb\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress Site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"sidebar\":[{\"text\":\"前端\",\"items\":[{\"text\":\"性能优化\",\"link\":\"/性能优化\"},{\"text\":\"前端鉴权\",\"link\":\"/前端鉴权\"}]},{\"text\":\"前端工程化\",\"items\":[{\"text\":\"前端部署\",\"link\":\"/前端部署\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>